import{d as K,e as N,u as O,y as f,s as b,f as v,c as g,k as e,j as x,g as o,w as r,I as q,F as z,o as y,b as d,J as s,h as P}from"./index.f718b679.js";import{c as T,a as m,b as h,d as k,e as p}from"./object.a9d688fa.js";import{S as C}from"./sweetalert2.all.59526288.js";import{_ as c,a as u,b as n}from"./FormRow.vue_vue_type_script_setup_true_lang.369bf1c4.js";const F={key:0},$=d("span",{class:"indicator-label"},"Zapisz",-1),B=d("span",{class:"indicator-progress"},[P("Prosz\u0119 czeka\u0107... "),d("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),D=[$,B],W={class:"row"},R={class:"col-lg-6 fv-row"},G={class:"col-lg-6 fv-row"},M=d("option",{value:"G"},"Grupowy",-1),I=d("option",{value:"I"},"Indywidualny",-1),L={class:"row"},A={class:"col-lg-6 fv-row"},E={class:"col-lg-6 fv-row"},J={class:"row"},Z={class:"col-lg-6 fv-row"},H={class:"col-lg-6 fv-row"},Q={class:"col-lg-9 d-flex align-items-center"},X={class:"form-check form-check-solid form-switch form-check-custom fv-row"},Y={class:"row"},ee={class:"col-lg-6 fv-row"},oe={class:"col-lg-6 fv-row"},le={class:"col-lg-9 d-flex align-items-center"},ae={class:"form-check form-check-solid form-switch form-check-custom fv-row"},ue=K({__name:"ProductSave",setup(te){const V=N(),U=O(),i=f(null),j=T().shape({name:m().required().label("Nazwa"),code_toil:m().nullable().label("Kod TOiL"),group_code:m().nullable().label("Kod grupy"),group_name:m().nullable().label("Grupa produktowa"),code:m().nullable().label("Kod"),code_owu:m().required().label("Kod OWU"),is_subscriptions:h().required().label("Czy produkt subskrypcyjny"),subscription_code:m().nullable().label("Kod subskrypcji"),subscription_status:m().nullable().label("Status subskrypcji"),subscription_date_from:k().nullable().label("Subskrypcja od"),subscription_date_to:k().nullable().label("Subskrypcja do"),kind:m().required().label("Rodzaj"),type:m().required().label("Typ"),partner_name:m().nullable().label("Nazwa partnera"),partner_code:m().nullable().label("Kod partnera"),insurer_min_age:p().nullable().label("Ubezpieczony wiek min"),insurer_max_age:p().nullable().label("Ubezpieczony wiek max"),insured_min_age:p().nullable().label("Ubierz wiek min"),insured_max_age:p().nullable().label("Ubierz wiek max"),period_of_insurance:p().nullable().label("Okres ubezpieczenia (msc)"),premium_type:m().nullable().label("Sk\u0142adka"),system_status:m().nullable().label("Status systemowy"),system_name:m().required().label("Nazwa systemu produktowego"),published_at:k().required().label("Data aktualizacji dokument\xF3w"),is_archived:h().required().label("Czy dokumenty archiwalne")});let w=f(!1),l=f({name:"",code_toil:"",group_code:"",group_name:"",code:"",code_owu:"",is_subscriptions:0,subscription_code:"",subscription_status:"",subscription_date_from:null,subscription_date_to:null,kind:"",type:"",partner_name:"",partner_code:"",insurer_min_age:null,insurer_max_age:null,insured_min_age:null,insured_max_age:null,period_of_insurance:null,premium_type:"",system_status:"",system_name:"",published_at:null,is_archived:0});typeof V.params.id<"u"&&(b.dispatch("products/getProduct",V.params.id),l=v(()=>b.state.products.product.data),w=v(()=>b.state.products.product.loading));async function S(){i.value&&(i.value.disabled=!0,i.value.setAttribute("data-kt-indicator","on"));try{const _=await b.dispatch("products/saveProduct",l.value);U.push({name:"ProductView",params:{id:_.data.data.id}})}catch(_){C.fire({text:_.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Spr\xF3buj ponownie!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}}),i.value&&(i.value.removeAttribute("data-kt-indicator"),i.value.disabled=!1)}}return(_,a)=>(y(),g(z,null,[e(w)?(y(),g("div",F," \u0141adowanie... ")):x("",!0),o(e(q),{onSubmit:a[25]||(a[25]=t=>S()),"validation-schema":e(j),novalidate:"novalidate",class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework"},{default:r(()=>[d("button",{ref_key:"submitButton",ref:i,type:"submit",class:"btn btn-lg btn-primary mb-5"},D,512),o(c,{title:"Dane podstawowe"},{default:r(()=>[o(u,{label:"Nazwa produktu",required:""},{default:r(()=>[o(e(s),{type:"text",name:"name",modelValue:e(l).name,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).name=t),placeholder:"Nazwa produktu",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"name"})]),_:1}),o(u,{label:"Kod TOiL"},{default:r(()=>[o(e(s),{type:"text",name:"code_toil",modelValue:e(l).code_toil,"onUpdate:modelValue":a[1]||(a[1]=t=>e(l).code_toil=t),placeholder:"Kod TOiL",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"code_toil"})]),_:1}),o(u,{label:"Kod OWU"},{default:r(()=>[o(e(s),{type:"text",name:"code_owu",modelValue:e(l).code_owu,"onUpdate:modelValue":a[2]||(a[2]=t=>e(l).code_owu=t),placeholder:"Kod OWU",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"code_owu"})]),_:1}),o(u,{label:"Kod produktu"},{default:r(()=>[o(e(s),{type:"text",name:"code",modelValue:e(l).code,"onUpdate:modelValue":a[3]||(a[3]=t=>e(l).code=t),placeholder:"Kod produktu",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"code"})]),_:1}),o(u,{label:"Grupa produktowa"},{default:r(()=>[d("div",W,[d("div",R,[o(e(s),{type:"text",name:"group_code",modelValue:e(l).group_code,"onUpdate:modelValue":a[4]||(a[4]=t=>e(l).group_code=t),placeholder:"Kod grupy produktowej",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"group_code"})]),d("div",G,[o(e(s),{type:"text",name:"group_name",modelValue:e(l).group_name,"onUpdate:modelValue":a[5]||(a[5]=t=>e(l).group_name=t),placeholder:"Nazwa grupy produktowej",class:"form-control form-control-lg form-control-solid"},null,8,["modelValue"]),o(n,{name:"group_name"})])])]),_:1}),o(u,{label:"Rodzaj produktu"},{default:r(()=>[o(e(s),{type:"text",name:"kind",modelValue:e(l).kind,"onUpdate:modelValue":a[6]||(a[6]=t=>e(l).kind=t),placeholder:"Rodzaj produktu",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"kind"})]),_:1}),o(u,{label:"Typ produktu"},{default:r(()=>[o(e(s),{name:"type",as:"select",modelValue:e(l).type,"onUpdate:modelValue":a[7]||(a[7]=t=>e(l).type=t),class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},{default:r(()=>[M,I]),_:1},8,["modelValue"]),o(n,{name:"type"})]),_:1})]),_:1}),o(c,{title:"Partner"},{default:r(()=>[o(u,{label:"Nazwa partnera"},{default:r(()=>[o(e(s),{type:"text",name:"partner_name",modelValue:e(l).partner_name,"onUpdate:modelValue":a[8]||(a[8]=t=>e(l).partner_name=t),placeholder:"Nazwa partnera",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"partner_name"})]),_:1}),o(u,{label:"Kod partnera"},{default:r(()=>[o(e(s),{type:"text",name:"partner_code",modelValue:e(l).partner_code,"onUpdate:modelValue":a[9]||(a[9]=t=>e(l).partner_code=t),placeholder:"Kod partnera",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"partner_code"})]),_:1})]),_:1}),o(c,{title:"Warunki Ubezpieczenia"},{default:r(()=>[o(u,{label:"Wiek ubezpieczaj\u0105cego"},{default:r(()=>[d("div",L,[d("div",A,[o(e(s),{type:"text",name:"insurer_min_age",modelValue:e(l).insurer_min_age,"onUpdate:modelValue":a[10]||(a[10]=t=>e(l).insurer_min_age=t),placeholder:"Minimalny wiek ubezpieczaj\u0105cego",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"insurer_min_age"})]),d("div",E,[o(e(s),{type:"text",name:"insurer_max_age",modelValue:e(l).insurer_max_age,"onUpdate:modelValue":a[11]||(a[11]=t=>e(l).insurer_max_age=t),placeholder:"Maksymalny wiek ubezpieczaj\u0105cego",class:"form-control form-control-lg form-control-solid"},null,8,["modelValue"]),o(n,{name:"insurer_max_age"})])])]),_:1}),o(u,{label:"Wiek ubezpieczonego"},{default:r(()=>[d("div",J,[d("div",Z,[o(e(s),{type:"text",name:"insured_min_age",modelValue:e(l).insured_min_age,"onUpdate:modelValue":a[12]||(a[12]=t=>e(l).insured_min_age=t),placeholder:"Minimalny wiek ubezpieczonego",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"insured_min_age"})]),d("div",H,[o(e(s),{type:"text",name:"insured_max_age",modelValue:e(l).insured_max_age,"onUpdate:modelValue":a[13]||(a[13]=t=>e(l).insured_max_age=t),placeholder:"Maksymalny wiek ubezpieczonego",class:"form-control form-control-lg form-control-solid"},null,8,["modelValue"]),o(n,{name:"insured_max_age"})])])]),_:1}),o(u,{label:"Okres ubezpieczenia"},{default:r(()=>[o(e(s),{type:"text",name:"period_of_insurance",modelValue:e(l).period_of_insurance,"onUpdate:modelValue":a[14]||(a[14]=t=>e(l).period_of_insurance=t),placeholder:"Okres ubezpieczenia",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"period_of_insurance"})]),_:1}),o(u,{label:"Typ sk\u0142adki"},{default:r(()=>[o(e(s),{type:"text",name:"premium_type",modelValue:e(l).premium_type,"onUpdate:modelValue":a[15]||(a[15]=t=>e(l).premium_type=t),placeholder:"Typ sk\u0142adki",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"premium_type"})]),_:1})]),_:1}),o(c,{title:"Subskrypcja"},{default:r(()=>[o(u,{label:"Produkt subskrypcyjny"},{default:r(()=>[d("div",Q,[d("div",X,[o(e(s),{type:"checkbox",name:"is_subscriptions",modelValue:e(l).is_subscriptions,"onUpdate:modelValue":a[16]||(a[16]=t=>e(l).is_subscriptions=t),value:1,"unchecked-value":0,class:"form-check-input w-45px h-30px"},null,8,["modelValue"])])]),o(n,{name:"is_subscriptions"})]),_:1}),e(l).is_subscriptions?(y(),g(z,{key:0},[o(u,{label:"Kod subskrypcji"},{default:r(()=>[o(e(s),{type:"text",name:"subscription_code",modelValue:e(l).subscription_code,"onUpdate:modelValue":a[17]||(a[17]=t=>e(l).subscription_code=t),placeholder:"Kod subskrypcji",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"subscription_code"})]),_:1}),o(u,{label:"Status subskrypcji"},{default:r(()=>[o(e(s),{type:"text",name:"subscription_status",modelValue:e(l).subscription_status,"onUpdate:modelValue":a[18]||(a[18]=t=>e(l).subscription_status=t),placeholder:"Status subskrypcji",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"subscription_status"})]),_:1}),o(u,{label:"Okres subskrypcji"},{default:r(()=>[d("div",Y,[d("div",ee,[o(e(s),{type:"text",name:"subscription_date_from",modelValue:e(l).subscription_date_from,"onUpdate:modelValue":a[19]||(a[19]=t=>e(l).subscription_date_from=t),placeholder:"Pocz\u0105tek okresu subskrypcji",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"subscription_date_from"})]),d("div",oe,[o(e(s),{type:"text",name:"subscription_date_to",modelValue:e(l).subscription_date_to,"onUpdate:modelValue":a[20]||(a[20]=t=>e(l).subscription_date_to=t),placeholder:"Koniec okresu subskrypcji",class:"form-control form-control-lg form-control-solid"},null,8,["modelValue"]),o(n,{name:"subscription_date_to"})])])]),_:1})],64)):x("",!0)]),_:1}),o(c,{title:"System produktowy"},{default:r(()=>[o(u,{label:"System produktowy"},{default:r(()=>[o(e(s),{type:"text",name:"system_name",modelValue:e(l).system_name,"onUpdate:modelValue":a[21]||(a[21]=t=>e(l).system_name=t),placeholder:"System produktowy",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"system_name"})]),_:1}),o(u,{label:"Status wdro\u017Cenia"},{default:r(()=>[o(e(s),{type:"text",name:"system_status",modelValue:e(l).system_status,"onUpdate:modelValue":a[22]||(a[22]=t=>e(l).system_status=t),placeholder:"Status wdro\u017Cenia",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"system_status"})]),_:1})]),_:1}),o(c,{title:"Dokumenty produktowe"},{default:r(()=>[o(u,{label:"Data udost\u0119pnienia dokument\xF3w"},{default:r(()=>[o(e(s),{type:"date",name:"published_at",modelValue:e(l).published_at,"onUpdate:modelValue":a[23]||(a[23]=t=>e(l).published_at=t),placeholder:"Data udost\u0119pnienia dokument\xF3w",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),o(n,{name:"published_at"})]),_:1}),o(u,{label:"Dokumenty archiwalne"},{default:r(()=>[d("div",le,[d("div",ae,[o(e(s),{type:"checkbox",name:"is_archived",value:1,"unchecked-value":0,modelValue:e(l).is_archived,"onUpdate:modelValue":a[24]||(a[24]=t=>e(l).is_archived=t),class:"form-check-input w-45px h-30px"},null,8,["modelValue"])])]),o(n,{name:"is_archived"})]),_:1})]),_:1})]),_:1},8,["validation-schema"])],64))}});export{ue as default};
