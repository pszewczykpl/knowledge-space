import{d as N,y as g,i as v,h as S,m as E,s as c,x as I,r as T,c as n,e as z,w as k,o as s,b as t,M as L,l as u,B as R,f as Z,k as p,z as U,A as W,n as q,F as x,j as w,t as y}from"./index.3c8cb8ef.js";import{_ as G}from"./Details.vue_vue_type_script_setup_true_lang.e138e6bb.js";import{a as H,A as J}from"./DataTable.93d387ed.js";import{i as K}from"./AuthService.e7e3c151.js";const O={class:"svg-icon svg-icon-3"},Q={key:0},X={class:"row"},Y={class:"col-12"},tt={class:"d-inline-flex"},et={class:"d-flex align-items-center position-relative"},ot=t("span",{class:"svg-icon svg-icon-1 position-absolute ms-6"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("rect",{opacity:"0.5",x:"17.0365",y:"15.1223",width:"8.15546",height:"2",rx:"1",transform:"rotate(45 17.0365 15.1223)",fill:"currentColor"}),t("path",{d:"M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z",fill:"currentColor"})])],-1),st={class:"row mb-10"},nt={class:"col-md-6"},at={key:0},lt={class:"card card-custom shadow-none p-0 m-0"},it={class:"card-header border-0 p-0 m-0 min-h-60px"},rt={class:"card-title fw-bold"},dt=t("div",{class:"card-toolbar"},[t("a",{href:"#",class:"btn btn-link btn-color-primary btn-active-color-primary btn-sm","data-skin":"primary","data-toggle":"tooltip","data-html":"true","data-original-title":"Pobierz poni\u017Csze dokumenty jako <b>.zip</b>"})],-1),ct={class:"card-body p-0 m-0"},ut={class:"mb-2"},mt={class:"d-flex align-items-center cursor-pointer"},ht={key:0},vt={class:"form-check form-check-sm form-check-custom form-check-solid me-3"},pt=["name","value","id"],_t=["onClick"],ft=["src"],bt=["onClick"],gt={class:"fs-7 fw-normal text-gray-800 mt-auto"},kt={class:"fs-7 fw-normal text-gray-400 mt-auto"},xt=t("div",{class:"my-0"},null,-1),Mt=N({__name:"ProductViewFiles",setup(wt){let r=g(!1);const _=()=>H(a.value,m.value,d.value),a=v(()=>c.state.products.product.files.data),F=v(()=>c.state.products.product.files.loading);let m=g([]);v(()=>c.getters.layoutConfig("general.layout"));const D=v(()=>c.getters.getThemeMode),M="http://127.0.0.1:8000",$="http://127.0.0.1:8000",j=S(),B=()=>{a.value.reverse(),m.value.reverse()},P=()=>{const i=[];a.value.forEach(l=>{const f=l.file_category.name;i.includes(f)||i.push(f)}),i.sort().reverse();const e=Math.ceil(i.length/2),h=i;return[h.slice(0,e),h.slice(e)]},C=i=>{let e=$+`/api/files/${i.id}`;window.open(e,"_blank")};E(()=>{c.dispatch("products/getProductFiles",j.params.id).then(()=>{m.value.splice(0,a.value.length,...a.value),I(),_()})});const d=g({global:"",draft:"0"}),V=()=>{a.value.splice(0,a.value.length,...m.value),d.value.draft=d.value.draft===""?"0":"",_()};return(i,e)=>{const h=T("router-link");return s(),n("div",null,[z(G,{title:"Dokumenty"},{toolbar:k(()=>[t("span",{onClick:e[0]||(e[0]=l=>L(r)?r.value=!u(r):r=!u(r)),class:"btn btn-light-success font-weight-bold btn-flex btn-sm ms-2 card-rounded"}," Pobierz jako .zip "),u(K)?(s(),R(h,{key:0,to:{name:"FileCreate"},class:"btn btn-light-primary font-weight-bold btn-flex btn-sm ms-2 card-rounded"},{default:k(()=>[t("span",O,[z(J)]),Z(" Dodaj dokument ")]),_:1})):p("",!0)]),default:k(()=>[F.value?(s(),n("div",Q," \u0141adowanie... ")):p("",!0),t("div",X,[t("div",Y,[t("div",tt,[t("div",et,[ot,U(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>d.value.global=l),onInput:e[2]||(e[2]=l=>_()),placeholder:"Wyszukaj dokument\xF3w...",class:"form-control form-control-sm card-rounded ps-15",style:{width:"250px",display:"inline-flex","border-style":"dashed","border-color":"#5E6278"}},null,544),[[W,d.value.global]])])]),t("a",{class:q(["btn btn-outline btn-outline-dashed btn-outline-info font-weight-bold btn-flex btn-sm ms-2 card-rounded",{active:d.value.draft!=="0"}]),onClick:e[3]||(e[3]=l=>V())}," Poka\u017C robocze ",2),t("a",{onClick:e[4]||(e[4]=l=>B()),class:"btn btn-outline btn-outline-dashed btn-outline-info btn-active-light-info font-weight-bold btn-flex btn-sm ms-2 card-rounded"}," Poka\u017C tylko produktowe ")])]),t("div",st,[(s(!0),n(x,null,w(P(),(l,f)=>(s(),n("div",nt,[t("div",null,[(s(!0),n(x,null,w(l,(b,yt)=>(s(),n("div",null,[a.value.filter(o=>o.file_category.name==b).length>0?(s(),n("div",at,[t("div",lt,[t("div",it,[t("h3",rt,y(b),1),dt]),t("div",ct,[(s(!0),n(x,null,w(a.value.filter(o=>o.file_category.name==b),o=>(s(),n("div",null,[t("div",ut,[t("div",mt,[u(r)?(s(),n("div",ht,[t("div",vt,[t("input",{class:"form-check-input",type:"checkbox",name:o.id.toString(),value:o.id,id:o.id.toString()},null,8,pt)])])):p("",!0),t("div",{onClick:A=>C(o),class:"me-3"},[t("img",{src:u(M)+"/media/svg/files/"+o.extension+(D.value==="light"?"":"-dark")+".svg",style:{width:"35px"}},null,8,ft)],8,_t),t("div",{onClick:A=>C(o),class:"d-flex flex-column flex-grow-1"},[t("span",gt,y(o.name),1),t("span",kt," Data ostatniej edycji: "+y(new Date(o.updated_at).toLocaleDateString()),1)],8,bt),xt])])]))),256))])])])):p("",!0)]))),256))])]))),256))])]),_:1})])}}});export{Mt as default};
