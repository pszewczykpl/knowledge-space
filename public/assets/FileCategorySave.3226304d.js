import{d as h,h as x,u as B,y as m,s as r,i as v,c as _,l as e,k as L,e as a,w as n,I as N,F as z,o as g,b as i,J as u,f as F}from"./index.3c8cb8ef.js";import{c as S,a as c}from"./object.ae29e33d.js";import{S as U}from"./sweetalert2.all.7c16f3a0.js";import{_ as C,a as p,b as f}from"./FormRow.vue_vue_type_script_setup_true_lang.e20a7a13.js";const R={key:0},$=i("span",{class:"indicator-label"},"Zapisz",-1),q=i("span",{class:"indicator-progress"},[F("Prosz\u0119 czeka\u0107... "),i("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),A=[$,q],I=h({__name:"FileCategorySave",setup(O){const b=x(),w=B(),t=m(null),V=S().shape({name:c().required().label("Nazwa"),description:c().nullable().label("Opis"),url:c().required().label("URL")});let k=m(!1),l=m({name:"",description:"",url:""});typeof b.params.id<"u"&&(r.dispatch("links/getLink",b.params.id),l=v(()=>r.state.links.link.data),k=v(()=>r.state.links.link.loading));async function y(){t.value&&(t.value.disabled=!0,t.value.setAttribute("data-kt-indicator","on"));try{t.value.removeAttribute("data-kt-indicator"),t.value.disabled=!1;const d=await r.dispatch("links/saveLink",l.value);w.push({name:"Links"})}catch(d){U.fire({text:d.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Spr\xF3buj ponownie!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}}),t.value&&(t.value.removeAttribute("data-kt-indicator"),t.value.disabled=!1)}}return(d,o)=>(g(),_(z,null,[e(k)?(g(),_("div",R," \u0141adowanie... ")):L("",!0),a(e(N),{class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",novalidate:"novalidate",onSubmit:o[3]||(o[3]=s=>y()),"validation-schema":e(V)},{default:n(()=>[i("button",{ref_key:"submitButton",ref:t,type:"submit",class:"btn btn-lg btn-primary w-100 mb-5"},A,512),a(C,{title:"Dane podstawowe"},{default:n(()=>[a(p,{label:"Nazwa",required:""},{default:n(()=>[a(e(u),{type:"text",name:"name",modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(l).name=s),placeholder:"Nazwa",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),a(f,{name:"name"})]),_:1}),a(p,{label:"Opis"},{default:n(()=>[a(e(u),{type:"text",name:"description",modelValue:e(l).description,"onUpdate:modelValue":o[1]||(o[1]=s=>e(l).description=s),placeholder:"Opis",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),a(f,{name:"description"})]),_:1}),a(p,{label:"URL"},{default:n(()=>[a(e(u),{type:"text",name:"url",modelValue:e(l).url,"onUpdate:modelValue":o[2]||(o[2]=s=>e(l).url=s),placeholder:"URL",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),a(f,{name:"url"})]),_:1})]),_:1})]),_:1},8,["validation-schema"])],64))}});export{I as default};
