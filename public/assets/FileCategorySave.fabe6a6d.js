import{d as h,e as V,u as k,y as m,s as l,f as c,c as p,k as a,j as F,g as t,w as i,I as B,F as N,o as b,b as n,J as g,h as z}from"./index.9d87a49a.js";import{c as S,a as v}from"./object.29d2d2a9.js";import{S as $}from"./sweetalert2.all.54902fca.js";import{_ as P,a as _,b as y}from"./FormRow.vue_vue_type_script_setup_true_lang.d1deacfd.js";const A={key:0},j=n("span",{class:"indicator-label"},"Zapisz",-1),q=n("span",{class:"indicator-progress"},[z("Prosz\u0119 czeka\u0107... "),n("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),R=[j,q],J=h({__name:"FileCategorySave",setup(T){const u=V(),x=k(),e=m(null),C=S().shape({name:v().required().label("Nazwa"),prefix:v().nullable().label("Prefix")});let f=m(!1),o=m({name:"",prefix:""});typeof u.params.id<"u"&&(l.dispatch("fileCategories/getFileCategory",u.params.id),o=c(()=>l.state.fileCategories.fileCategory.data),f=c(()=>l.state.fileCategories.fileCategory.loading));async function w(){e.value&&(e.value.disabled=!0,e.value.setAttribute("data-kt-indicator","on"));try{e.value.removeAttribute("data-kt-indicator"),e.value.disabled=!1;const d=await l.dispatch("fileCategories/saveFileCategory",o.value);x.push({name:"FileCategories"})}catch(d){$.fire({text:d.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Spr\xF3buj ponownie!",customClass:{confirmButton:"btn fw-bold btn-light-danger"}}),e.value&&(e.value.removeAttribute("data-kt-indicator"),e.value.disabled=!1)}}return(d,s)=>(b(),p(N,null,[a(f)?(b(),p("div",A," \u0141adowanie... ")):F("",!0),t(a(B),{class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",novalidate:"novalidate",onSubmit:s[2]||(s[2]=r=>w()),"validation-schema":a(C)},{default:i(()=>[n("button",{ref_key:"submitButton",ref:e,type:"submit",class:"btn btn-lg btn-primary mb-5"},R,512),t(P,{title:"Dane podstawowe"},{default:i(()=>[t(_,{label:"Nazwa",required:""},{default:i(()=>[t(a(g),{type:"text",name:"name",modelValue:a(o).name,"onUpdate:modelValue":s[0]||(s[0]=r=>a(o).name=r),placeholder:"Nazwa",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),t(y,{name:"name"})]),_:1}),t(_,{label:"Prefix"},{default:i(()=>[t(a(g),{type:"text",name:"prefix",modelValue:a(o).prefix,"onUpdate:modelValue":s[1]||(s[1]=r=>a(o).prefix=r),placeholder:"Prefix",class:"form-control form-control-lg form-control-solid mb-3 mb-lg-0"},null,8,["modelValue"]),t(y,{name:"description"})]),_:1})]),_:1})]),_:1},8,["validation-schema"])],64))}});export{J as default};
